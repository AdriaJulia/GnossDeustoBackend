[[entities]]
code = "000.010.000.000"
displayname = "foaf:Person"
primary = true
id.resource = "Person"
id.format = "{identifier}"

    [[entities.subentities]]
    displayname = "vcard:Individual"

        [[entities.subentities.relationships]]
        direct = "roh:contactInfoOf"
        inverse = "roh:hasContactInfo"

        [[entities.subentities.subentities]]
        displayname = "vcard:Addresss"

            [[entities.subentities.subentities.relationships]]
            inverse = "vcard:hasAddress"

            [[entities.subentities.subentities.properties]]
            displayname = "vcard:postalCode"

                [[entities.subentities.subentities.properties.sources]]
                code = "000.010.000.160"
                name = "postalCode"

            [[entities.subentities.subentities.properties]]
            displayname = "vcard:address"
            format = "{address} {extended}"

                [[entities.subentities.subentities.properties.sources]]
                code = "000.010.000.140"
                name = "address"

                [[entities.subentities.subentities.properties.sources]]
                code = "000.010.000.150"
                name = "extended"

            [[entities.subentities.subentities.properties]]
            displayname = "vcard:city"

                [[entities.subentities.subentities.properties.sources]]
                code = "000.010.000.170"
                name = "locality"

            # TODO obtener valor mapeando las tablas de definición del XML
            # por ejemplo, si la comunidad autónoma es ES21, ser capaz de generar tripletas
            # TODO Comunidad Autónoma
            # TODO País

        [[entities.subentities.subentities]]
        displayname = "vcard:Email"

            [[entities.subentities.subentities.relationships]]
            inverse = "vcard:hasEmail"

            [[entities.subentities.subentities.properties]]
            displayname = "vcard:email"

                [[entities.subentities.subentities.properties.sources]]
                code = "000.010.000.230"
                name = "email"

        [[entities.subentities.subentities]]
        displayname = "vcard:Name"

            [[entities.subentities.subentities.relationships]]
            inverse = "vcard:hasName"

            [[entities.subentities.subentities.properties]]
            displayname = "vcard:givenName"

                [[entities.subentities.subentities.properties.sources]]
                code = "000.010.000.020"
                name = "name"

            [[entities.subentities.subentities.properties]]
            displayname = "vcard:familyName"

                [[entities.subentities.subentities.properties.sources]]
                code = "000.010.000.010"
                bean = "FirstFamilyName"
                name = "name"


    # TODO cuando se sepa cómo modelar segundo apellido, moverlo ahí y quitar esto
    [[entities.properties]] # Nombre
    ontology = "foaf"
    name = "name"
    format = "{first_name} {first_family_name} {second_family_name}"

        [[entities.properties.sources]] # Nombre
        code = "000.010.000.020"
        name = "first_name"
        bean = "Value"

        [[entities.properties.sources]] # Apellido 1
        code = "000.010.000.010"
        name = "first_family_name"
        bean = "FirstFamilyName"

        [[entities.properties.sources]] # Apellido 2
        code = "000.010.000.010"
        name = "second_family_name"
        bean = "SecondFamilyName"

    # TODO Sustituir por subclase VCARD cuando sepamos lo de la extensión
    [[entities.properties]] # Teléfono
    ontology = "foaf"
    name = "phone"
    format = "tel:{number}{extension}"

        [[entities.properties.sources]] # Número
        code = "000.010.000.210"
        name = "number"
        bean = "Number"

        [[entities.properties.sources]] # Extensión
        code = "000.010.000.210"
        name = "extension"
        bean = "Extension"
        format = ",{value}"

    # TODO Sustituir por subclase VCARD
    [[entities.properties]]
    ontology = "foaf"
    name = "homepage"
    format = "{homepage}"

        [[entities.properties.sources]]
        code = "000.010.000.250"
        name = "homepage"
        bean = "Value"

[[entities]]
code = "030.010.000.000"
displayname = "vivo:TeacherRole"

    [[entities.relationships]]
    direct = "oboro:RO_000052"
    inverse = "oboro:RO_000053"
    link_to_cvn_person = true

    [[entities.subentities]]
    displayname = "vivo:Course"

        [[entities.subentities.relationships]]
        direct = "obobfo:BFO_0000054"
        inverse = "obobfo:BFO_0000055"

        [[entities.subentities.properties]]
        displayname = "roh:title"
        format = "{title}"

            [[entities.subentities.properties.sources]]
            code = "030.010.000.160"
            name = "title"

        [[entities.subentities.properties]]
        displayname = "vivo:courseCredits"
        format = "{credits}"

            [[entities.subentities.properties.conditions]]
            type = "bean_value_equals"
            code = "030.010.000.210"
            bean = "Value"
            value = "000"

            [[entities.subentities.properties.sources]]
            code = "030.010.000.220"
            name = "credits"

    [[entities.subentities]]
    displayname = "vivo:DateTimeInterval"

        [[entities.subentities.relationships]]
        inverse = "vivo:dateTimeInterval"

        [[entities.subentities.subentities]]
        displayname = "vivo:DateTimeValue"

            [[entities.subentities.subentities.relationships]]
            inverse = "vivo:start"

            [[entities.subentities.subentities.properties]]
            displayname = "vivo:dateTime"
            format = "{start}"

                [[entities.subentities.subentities.properties.sources]]
                code = "030.010.000.550"
                name = "start"
                bean = "Value"

        [[entities.subentities.subentities]]
        displayname = "vivo:DateTimeValue"

            [[entities.subentities.subentities.relationships]]
            inverse = "vivo:end"

            [[entities.subentities.subentities.properties]]
            displayname = "vivo:dateTime"
            format = "{end}"

                [[entities.subentities.subentities.properties.sources]]
                code = "030.010.000.610"
                name = "end"
                bean = "Value"

[[entities]]
code = "050.020.010.000"
ontology = "vivo"
classname = "Project"
id.resource = "Project"

    [[entities.properties]]
    ontology = "roh"
    name = "title"
    format = "{title}"

        [[entities.properties.sources]]
        code = "050.020.010.010"
        name = "title"
        bean = "Value"

    [[entities.properties]]
    ontology = "vivo"
    name = "description"
    format = "{description}"

        [[entities.properties.sources]]
        code = "050.020.010.340"
        name = "description"
        bean = "Value"

    [[entities.subentities]]
    ontology = "roh"
    classname = "Funding"

        [[entities.subentities.relationships]]
        ontology = "roh"
        name = "supports"
        inverse_ontology = "roh"
        inverse_name = "isSupportedBy"

        [[entities.subentities.properties]]
        ontology = "vivo"
        name = "identifier"
        format = "{identifier}"

            [[entities.subentities.properties.sources]]
            code = "050.020.010.260"
            name = "identifier"
            bean = "Value"

        [[entities.subentities.subentities]]
        ontology = "roh"
        classname = "FundingAmount"

            [[entities.subentities.subentities.relationships]]
            ontology = "oboro"
            name = "BFO_0000050"
            inverse_ontology = "oboro"
            inverse_name = "BFO_0000051"

            [[entities.subentities.subentities.properties]]
            ontology = "roh"
            name = "monetaryAmount"
            format = "{monetary_amount}"

                [[entities.subentities.subentities.properties.sources]]
                code = "050.020.010.290"
                name = "monetary_amount"
                bean = "Value"

    [[entities.subentities]]
    ontology = "vivo"
    classname = "MemberRole"

        [[entities.subentities.relationships]]
        ontology = "vivo"
        name = "relates"
        inverse_ontology = "vivo"
        inverse_name = "relates"

        [[entities.subentities.relationships]]
        ontology = "roh"
        name = "roleOf"
        inverse_ontology = "roh"
        inverse_name = "hasRole"
        link_to_cvn_person = true

        [[entities.subentities.subentities]]
        ontology = "vivo"
        classname = "DateTimeInterval"

            [[entities.subentities.subentities.relationships]]
            inverse_ontology = "vivo"
            inverse_name = "dateTimeInterval"

            [[entities.subentities.subentities.subentities]]
            ontology = "vivo"
            classname = "DateTimeValue"

                [[entities.subentities.subentities.subentities.relationships]]
                inverse_ontology = "vivo"
                inverse_name = "start"

                [[entities.subentities.subentities.subentities.properties]]
                ontology = "vivo"
                name = "dateTime"
                format = "{start}"

                    [[entities.subentities.subentities.subentities.properties.sources]]
                    code = "050.020.010.270"
                    name = "start"
                    bean = "Value"

    [[entities.subentities]]
    ontology = "vivo"
    classname = "DateTimeInterval"

        [[entities.subentities.relationships]]
        inverse_ontology = "vivo"
        inverse_name = "dateTimeInterval"

        [[entities.subentities.subentities]]
        ontology = "vivo"
        classname = "DateTimeValue"

            [[entities.subentities.subentities.relationships]]
            inverse_ontology = "vivo"
            inverse_name = "start"

            [[entities.subentities.subentities.properties]]
            ontology = "vivo"
            name = "dateTime"
            format = "{start}"

                [[entities.subentities.subentities.properties.sources]]
                code = "050.020.010.270"
                name = "start"
                bean = "Value"

        [[entities.subentities.subentities]]
        ontology = "vivo"
        classname = "DateTimeValue"

            [[entities.subentities.subentities.relationships]]
            inverse_ontology = "vivo"
            inverse_name = "end"

            [[entities.subentities.subentities.properties]]
            ontology = "vivo"
            name = "dateTime"
            format = "{end}"

                [[entities.subentities.subentities.properties.sources]]
                code = "050.020.010.410"
                name = "end"
                bean = "Value"


[[entities]] # Publicaciones, documentos científicos y técnicos
code = "060.010.010.000"
ontology = "bibo"
classname = "AcademicArticle"
id.resource = "Article"
id.format = "{doi}"

    [[entities.relationships]]
    ontology = "roh"
    name = "correspondingAuthor"
    inverse_ontology = "roh"
    inverse_name = "correspondingAuthorOf"
    link_to_cvn_person = true

    [[entities.properties]]
    ontology = "roh"
    name = "title"
    format = "{title}"

        [[entities.properties.sources]]
        code = "060.010.010.030"
        name = "title"
        bean = "Value"

    [[entities.properties]]
    ontology = "vivo"
    name = "dateTime"
    format = "{publication_date}"

        [[entities.properties.sources]]
        code = "060.010.010.140"
        name = "publication_date"
        bean = "Value"

    [[entities.properties]]
    ontology = "bibo"
    name = "start"
    format = "{initialpage}"

        [[entities.properties.sources]]
        code = "060.010.010.090"
        name = "initialpage"
        bean = "InitialPage"

    [[entities.properties]]
    ontology = "bibo"
    name = "end"
    format = "{finalpage}"

        [[entities.properties.sources]]
        code = "060.010.010.090"
        name = "finalpage"
        bean = "FinalPage"

# Posición actual
[[entities]]
code = "010.010.000.000"
ontology = "vivo"
classname = "Position"
id.resource = "Position"

    [[entities.subentities]]
    ontology = "vivo"
    classname = "DateTimeInterval"

        [[entities.subentities.relationships]]
        inverse_ontology = "vivo"
        inverse_name = "dateTimeInterval"

        [[entities.subentities.subentities]]
        ontology = "vivo"
        classname = "DateTimeValue"

            [[entities.subentities.subentities.relationships]]
            inverse_ontology = "vivo"
            inverse_name = "start"

            [[entities.subentities.subentities.properties]]
            ontology = "vivo"
            name = "dateTime"
            format = "{start}"

                [[entities.subentities.subentities.properties.sources]]
                code = "010.010.000.180"
                name = "start"
                bean = "Value"

    [[entities.subentities]]
    ontology = "foaf"
    classname = "Organization"
    id.resource = "Organization"
    id.format = "{name}"

        [[entities.subentities.relationships]]
        ontology = "vivo"
        name = "relates"
        inverse_ontology = "vivo"
        inverse_name = "relatedBy"

        [[entities.subentities.properties]]
        ontology = "foaf"
        name = "name"
        format = "{name}"

            [[entities.subentities.properties.sources]]
            code = "010.010.000.020"
            name = "name"
            bean = "Name"

    [[entities.relationships]]
    inverse_ontology = "roh"
    inverse_name = "hasPosition"
    ontology = "roh"
    name = "positionOf"
    link_to_cvn_person = true

    [[entities.properties]]
    ontology = "vivo"
    name = "HRJobTitle"
    format = "{title}"

        [[entities.properties.sources]]
        code = "010.010.000.170"
        name = "title"
        bean = "Value"


# Posiciones en el pasado
[[entities]]
code = "010.020.000.000"
ontology = "vivo"
classname = "Position"
id.resource = "Position"

    [[entities.subentities]]
    ontology = "vivo"
    classname = "DateTimeInterval"

        [[entities.subentities.relationships]]
        inverse_ontology = "vivo"
        inverse_name = "dateTimeInterval"

        [[entities.subentities.subentities]]
        ontology = "vivo"
        classname = "DateTimeValue"

            [[entities.subentities.subentities.relationships]]
            inverse_ontology = "vivo"
            inverse_name = "start"

            [[entities.subentities.subentities.properties]]
            ontology = "vivo"
            name = "dateTime"
            format = "{start}"

                [[entities.subentities.subentities.properties.sources]]
                code = "010.020.000.180"
                name = "start"
                bean = "Value"

        [[entities.subentities.subentities]]
        ontology = "vivo"
        classname = "DateTimeValue"

            [[entities.subentities.subentities.relationships]]
            inverse_ontology = "vivo"
            inverse_name = "end"

            [[entities.subentities.subentities.properties]]
            ontology = "vivo"
            name = "dateTime"
            format = "{end}"

                [[entities.subentities.subentities.properties.sources]]
                code = "010.020.000.310"
                name = "end"
                bean = "Value"

    [[entities.subentities]]
    ontology = "foaf"
    classname = "Organization"
    id.resource = "Organization"
    id.format = "{name}"

        [[entities.subentities.relationships]]
        ontology = "vivo"
        name = "relates"
        inverse_ontology = "vivo"
        inverse_name = "relatedBy"

        [[entities.subentities.properties]]
        ontology = "foaf"
        name = "name"
        format = "{name}"

            [[entities.subentities.properties.sources]]
            code = "010.020.000.020"
            name = "name"
            bean = "Name"

    [[entities.relationships]]
    inverse_ontology = "roh"
    inverse_name = "hasPosition"
    ontology = "roh"
    name = "positionOf"
    link_to_cvn_person = true

    [[entities.properties]]
    ontology = "vivo"
    name = "HRJobTitle"
    format = "{title}"

        [[entities.properties.sources]]
        code = "010.020.000.170"
        name = "title"
        bean = "Value"

    [[entities.properties]]
    ontology = "vivo"
    name = "description"
    format = "{description}"

        [[entities.properties.sources]]
        code = "010.020.000.260"
        name = "description"
        bean = "Value"

[[entities]] # Formación académica recibida
code = "020.010.010.000"
ontology = "vivo"
classname = "AwardedDegree"

    [[entities.relationships]]
    ontology = "vivo"
    name = "related"
    inverse_ontology = "vivo"
    inverse_name = "related"
    link_to_cvn_person = true


    [[entities.criteria.property]]
    ontology = "vivo"
    name = "relates"
    inverse_ontology = "vivo"
    inverse_name = "relates"
    link_to_cvn_person = true

    [[entities.properties]]
    ontology = "vivo"
    name = "dateTime"
    format = "{date}"

        [[entities.properties.sources]]
        code = "020.010.010.130"
        name = "date"
        bean = "Value"

    [[entities.subentities]]
    ontology = "vivo"
    classname = "AcademicDegree"
    id.resource = "AcademicDegree"
    id.format = "{title}"

        [[entities.subentities.relationships]]
        ontology = "vivo"
        name = "relates"

        [[entities.subentities.properties]]
        ontology = "roh"
        name = "title"
        format = "{title}"

            [[entities.subentities.properties.sources]]
            code = "020.010.010.030"
            name = "title"
            bean = "Name"

        [[entities.subentities.subentities]]
        ontology = "vivo"
        classname = "University"
        id.resource = "University"
        id.format = "{name}"

            [[entities.subentities.subentities.relationships]]
            ontology = "roh"
            name = "awards"
            inverse_ontology = "roh"
            inverse_name = "awardedBy"

            [[entities.subentities.subentities.properties]]
            ontology = "foaf"
            name = "name"
            format = "{name}"

                [[entities.subentities.subentities.properties.sources]]
                code = "020.010.010.090"
                name = "name"
                bean = "Name"

[[entities]] # Doctorado
code = "020.010.020.000"
ontology = "roh"
classname = "PhDThesis"
id.resource = "PhDThesis"

    [[entities.properties]]
    ontology = "vivo"
    name = "dateTime"
    format = "{date}"

        [[entities.properties.sources]]
        code = "020.010.020.140"
        name = "date"
        bean = "Value"

    [[entities.properties]]
    ontology = "roh"
    name = "title"
    format = "{title}"

        [[entities.properties.sources]]
        code = "020.010.020.160"
        name = "title"
        bean = "Value"

    [[entities.subentities]]
    ontology = "roh"
    classname = "PhDThesisMetric"

        [[entities.subentities.relationships]]
        ontology = "roh"
        name = "metricOf"
        inverse_ontology = "roh"
        inverse_name = "hasMetric"

        [[entities.subentities.properties]]
        ontology = "roh"
        name = "mark"
        format = "{mark}"

            [[entities.subentities.properties.sources]]
            code = "020.010.020.190"
            name = "mark"

    [[entities.subentities]]
    displayname = "foaf:Organization"

        [[entities.subentities.properties]]
        displayname = "foaf:name"
        format = "{name}"

            [[entities.subentities.properties.sources]]
            code = "030.010.000.540"
            bean = "Name"
            name = "name"

    [[entities.subentities]]
    ontology = "roh"
    classname = "DegreeHomologation"

        # TODO cambiar por la relación real
        [[entities.subentities.relationships]]
        ontology = "vivo"
        name = "relates"
        inverse_ontology = "vivo"
        inverse_name = "relates"

        [[entities.subentities.properties]]
        ontology = "vivo"
        name = "dateTime"
        format = "{date}"

            [[entities.subentities.properties.sources]]
            code = "020.010.020.250"
            name = "date"


[[entities]] # Certificado de idiomas
code = "020.060.000.000"
displayname = "roh:LanguageCertificate"

    [[entities.conditions]]
    type = "bean_value_equals"
    code = "020.060.000.010"
    bean = "Identification"
    value = "eus"

    [[entities.relationships]]
    direct = "roh:hasAccreditation"
    inverse = "roh:accreditationOf"
    link_to_cvn_person = true

    [[entities.properties]]
    displayname = "roh:language"

        [[entities.properties.sources]]
        code = "020.060.000.010"
        name = "language"
        bean = "Identification"

    [[entities.properties]]
    displayname = "roh:readingSkill"

        [[entities.properties.sources]]
        code = "020.060.000.130"
        name = "skill"
        bean = "Value"

    [[entities.properties]]
    displayname = "roh:spokenInteractionSkill"

        [[entities.properties.sources]]
        code = "020.060.000.140"
        name = "skill"
        bean = "Value"

    [[entities.properties]]
    displayname = "roh:speakingSkill"

        [[entities.properties.sources]]
        code = "020.060.000.150"
        name = "skill"
        bean = "Value"

    [[entities.properties]]
    displayname = "roh:writingSkill"

        [[entities.properties.sources]]
        code = "020.060.000.160"
        name = "skill"
        bean = "Value"